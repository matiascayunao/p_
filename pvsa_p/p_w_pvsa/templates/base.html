<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>PVSA</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
          crossorigin="anonymous">

    <!-- Estilos mínimos propios -->
    <style>
      body {
        background-color: #f5f7fa;
      }
      .navbar-pvsa {
        background: #06b6b9;
      }
      .navbar-pvsa .nav-link,
      .navbar-pvsa .navbar-brand {
        color: #ffffff !important;
      }
      .navbar-pvsa .dropdown-menu {
        font-size: .9rem;
      }
      main {
        min-height: calc(100vh - 56px);
      }
      footer {
        font-size: .8rem;
      }
    </style>
  </head>

  <body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg navbar-dark navbar-pvsa shadow-sm">
      <div class="container-fluid px-3">

        <!-- Marca -->
        <a class="navbar-brand fw-bold" href="{% url 'home' %}">
          PVSA
        </a>

        {% if user.is_authenticated %}
          <!-- Botón hamburguesa -->
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarPVSA"
                  aria-controls="navbarPVSA" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Contenido colapsable -->
          <div class="collapse navbar-collapse" id="navbarPVSA">

            <!-- Menú central -->
            <ul class="navbar-nav mx-auto align-items-lg-center gap-lg-1">

              <!-- SECTOR -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  SECTOR
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_sectores' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_sector' %}">Crear</a></li>
                </ul>
              </li>

              <!-- UBICACION -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  UBICACION
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_ubicaciones' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_ubicacion' %}">Crear</a></li>
                </ul>
              </li>

              <!-- PISO -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  PISO
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_pisos' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_piso' %}">Crear</a></li>
                </ul>
              </li>

              <!-- LUGAR -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  LUGAR
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_lugares' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_lugar' %}">Crear</a></li>
                </ul>
              </li>

              <!-- TIPO DE LUGAR -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  TIPO DE LUGAR
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_tipos_lugar' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_tipo_lugar' %}">Crear</a></li>
                </ul>
              </li>

              <!-- CATEGORIA -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  CATEGORIA DEL OBJETO
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_categorias' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_categoria_objeto' %}">Crear</a></li>
                </ul>
              </li>

              <!-- OBJETO -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  OBJETO
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_objetos' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_objeto' %}">Crear</a></li>
                </ul>
              </li>

              <!-- TIPO DE OBJETO -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  TIPO DE OBJETO
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_tipos_objeto' %}">Ver</a></li>
                  <li><a class="dropdown-item" href="{% url 'crear_tipo_objeto' %}">Crear</a></li>
                </ul>
              </li>

              <!-- OBJETO DEL LUGAR -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  OBJETO DEL LUGAR
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_objetos_lugar' %}">Ver</a></li>
                </ul>
              </li>

              <!-- HISTORICO -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  HISTORICO
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="{% url 'lista_historicos' %}">Ver</a></li>
                </ul>
              </li>
            </ul>

            <!-- Usuario -->
            <ul class="navbar-nav ms-auto">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle fw-semibold" href="#" role="button" data-bs-toggle="dropdown">
                  {{ user.username }}
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  {% if user.is_staff or user.is_superuser %}
                    <li>
                      <a class="dropdown-item" href="/admin/">Panel Admin</a>
                      <a class="dropdown-item" href="{% url 'signup' %}">Crear usuario</a>
                    </li>
                    <li><hr class="dropdown-divider"></li>
                  {% endif %}
                  <li>
                    <a class="dropdown-item" href="{% url 'signout' %}">Cerrar sesión</a>
                  </li>
                </ul>
              </li>
            </ul>

          </div>
        {% endif %}
      </div>
    </nav>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="py-4">
      <div class="container">

        <!-- Mensajes de Django -->
        {% if messages %}
          <div class="mb-3">
            {% for message in messages %}
              <div class="alert alert-{{ message.tags|default:'info' }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
              </div>
            {% endfor %}
          </div>
        {% endif %}

        {% block content %}{% endblock %}
      </div>
    </main>

    <!-- FOOTER sencillo -->
    <footer class="border-top bg-white py-2">
      <div class="container d-flex justify-content-between">
        <span class="text-muted">PVSA · Sistema de registro de activos</span>
        <span class="text-muted">v1.0</span>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
            crossorigin="anonymous"></script>
  </body>
</html>